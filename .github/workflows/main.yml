name: CI/CD

on:
  push:
    branches:
      - main

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout repository
        uses: actions/checkout@
      - name: Setup Node.js
        uses: actions/setup-node@v2
        with:
          node-version: ${{matrix.node--version}}
      - name: npm install
        run: npm ci

  deploy:
    needs: build
    runs-on: ubuntu-latest

    steps:
      - name: Checkout repository
        uses: actions/checkout@v2

      - name: Setup Node.js
        uses: actions/setup-node@v2
        with:
          node-version: 14

      - name: Install SSH client
        run: sudo apt-get install -y openssh-client

      - name: Deploy via SSH
        uses: easingthemes/ssh-deploy@main
        env:
          SSH_PRIVATE_KEY: "MIIEpAIBAAKCAQEA2T2J8kaHAP0lMB6yKx1nyIogkf96g4ZNq4ANUPrmIy71Kj+TRHXI8j7wTo/5MbOe/dJg/nFMzWDCR4Vh4qpFQxwoeJR8Xh1RA1ad7fZj+z7EHDiP4gWVJi92qIBHc3PEwyiwGSXAQWL53gsgdVRwN5lODD5IESCVmcgcMMTACbr+sOIKQ3CYjzcw0n71L6zveDDAdGr2hTRuFeJZIh2f0DTl63H5bb8IETcx6bQlow5RVHO8b4OlKXNKtH6erW3Q9DIEeZGUWBgtEqRcx+4wlzURhyQtV10ZIqR+mB/wHUe3RLn9wECIHu9ac0riK1mgLr4BC3YdIgWLNwXGHcES2wIDAQABAoIBAHjCs79BI2USU6zXM3WyJ/IbjpV6LlGUw/JVAZIFlw7x2Ik+xA+nZif7grw5Xm4ZioVQgGiQ9P+qDPWTGOHWgyAWNA0rhaMPquwvJyWT9OpCbuO9MYaUUd/jPJPYk1+DeFqAcLvZ93Cho4KiLs3qPWM6zl8R9B/JPEA7NCiMBrChAvsBjZswY+SnL0d3v0vH4bUcFcnWY+D/N7o3AEaZ4LySTXZ6NlHvDSbkFafUacgD0mHE7ODjsGkuIygzVd4uxnU/lzQST+PhVe6Fj1EiOn0laFqYXDvpqcgRsYLe4PiqB4gU/HWWu9Bh7QRTc2rzTf2JbtvxkSjW7qip01u3CpkCgYEA9MuxwcEjmdAxAz/4SkiIrDi7bcAzprp+GeCOGTy/F60oTMLpEHTLSqamIe4TEjZbsYhgPYxsK45yQ5fD9r7gsOSIumjvCQMM0SjdWTJTEyaOxwbU47U323Y+D3VmPqYSnAdV+k68DMVnnBLuNAK846uu5onwALUBsoI6c4MqWJcCgYEA4y75prNSLjErfeSqDNPEWuEzJpM3UhnbQCoRFtqqhOpXWBNy+SXGTYaqd9lvd9ZQ6xK1j7mbgL0hVeHf62pTuW6TC7W8v4b7yd9WwIcuxpAU/ZdDCKVbhsi3LVaKIr5rO99RG2iOhxAZoMbpGGPGPPdfqHgszCAq1CYH2I4wvF0CgYEAnPNYxhRyIfVE54OFSwNUda9uJID93OFnZmn+UZoMHz8LPqQdUErB6NwOWmTNX3jws1Pv+KZm2EpdYo8UushJQcFVFMegstN8zUH5IW5Nq1Kmal8r8c9Hv/MA+WJZKsPJ3LYrXvBKS5npwzyz8y7qMsLpwbAg7CMhsnUiytsHNIMCgYEAzpCW1Jj13yQ8HFL+v30Ja2yaOrfetBrofPYC5dna89Gzq1S71IghP7pzY1fj/31xw9wWE+G635qYJeOj2wSprdA5iYssXKVaaVpWIeaIhGjbfRy9Ca54gxwbWfD21tJ25FCQCbDO70WXV9WkedW2mRZ/9smWSd/xsUYHGkNnUs0CgYAtdwq/jDgKzZiQ31pR9/D+mrGoVTZmOHt/GlpdG0Ypuq/ulUBgKb3WLngiCwV1W2+WqRcJYnPaBOXR6LIxcD4GZKs1ilFyNt6P/p3baI30eENlTlluWdEXX1YlBmZS6exmW2W7E4okMl7ukH/yVdUOrLNCEuwVha4EHzwBoFqXBA=="
          ARGS: "-rlgoDzvc -i --delete"
          SOURCE: "/"
          REMOTE_HOST: "api.achmadsyarif.com"
          REMOTE_USER: "u1566631"
          REMOTE_PORT: "65002"
          TARGET: "/home/u156631/public_html/test"
          EXCLUDE: "/dist/,/node_modules/"
